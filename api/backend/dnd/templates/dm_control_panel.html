{% extends "base.html" %}

{% block title %}DM Control Panel{% endblock %}

{% block content%}
    <script>
        const dmSocket = new WebSocket(
            "ws://" + window.location.host + "/ws/dm/"
        );

        dmSocket.onopen = function(e) {
            console.log("DM Websocket connected");
        };

        dmSocket.onmessage = function(e) {
            const data = JSON.parse(e.data);
            console.log("Received message from server:", data.message);
        }

        function broadcastMessage(message) {
            dmSocket.send(JSON.stringify({
                "message": message
            }));
        }
    </script>
    <h2>Select Artwork to Display</h2>
    <form id="artworkForm">
        <select name="artwork">
            {% for artwork in artworks %}
                <option value="{{ artwork.id }}">{{ artwork.title }}</option>
            {% endfor %}
        </select>
        <label>Target Player:</label>
        <select name="player">
            <option value="">All Players</option>
            {% for player in players %}
                <option value="{{ player.id }}">{{ player.username }}</option>
            {% endfor %}
        </select>
        <button type="submit">Display Artwork</button>
    </form>
{% endblock %}

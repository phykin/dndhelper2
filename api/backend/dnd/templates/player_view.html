{% extends "base.html" %}
{% load static %}

{% block title %}Player View{% endblock %}

{% block content%}
    <script>
        const playerSocket = new WebSocket(
            "ws://" + window.location.host + "/ws/player/"
        );

        playerSocket.onopen = function(e) {
            console.log("Player WebSocket connected");
        };

        playerSocket.onmessage = function(e) {
            const data = JSON.parse(e.data);
            const messagesDisplay = document.getElementById("messagesDisplay");
            messagesDisplay.innerHTML += `<p>${data.message}</p>`;
        }
    </script>
    <h2>Displayed Artwork</h2>
    <div id="artworkDisplay">
        {% for artwork in artworks %}
            <img src="{% static artwork.file_path %}" alt="{{ artwork.title }}">
        {% endfor %}
    </div>    
    <h2>Messages</h2>
    <div id="messagesDisplay">
        {% for message in messages %}
            <p>{{ message.content }}</p>
        {% endfor %}
    </div>
{% endblock %}
